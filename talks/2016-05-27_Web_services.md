# Remote data access via web services

## Motivation

* The ability to extract a subset of a large data set. 
* Or you may only want to visualise the data in some standard way (e.g. generate a map), without downloading the data.
* Can be accessed from anywhere, using only a web browser.
* Data anlysis tools and custom-written code can also connect to it.


## What is a web service?

A web service is a system that accepts requests and returns results over the Web (via HTTP). A request can be typed directly into the address bar of a browser, bit is more commonly generated by other software that interacts with the service.


## The AODN Portal

As an example, web services make it possible to find, preview and download data using the [AODN Portal](https://imos.aodn.org.au). Behind the scences, the portal combines three services that it talks to via the web:
* A [GeoNetwork](http://geonetwork-opensource.org/) metadata catalogue, to find data collections;
* A Web Map Service (WMS) to generate map tiles
* A Web Feature Service (WFS) to provide data downloads.

These services can also be accessed directly.


## Web Feature Service (WFS)

* A standard of the [Open Geospatial Consortium](http://www.opengeospatial.org/)
* Allows geographic features (spatial extent + data) to be accessed via the Web.
* Allows filtering based on spatial extent and attributes.
* Served by GIS software (e.g. [GeoServer](http://geoserver.org/), [QGIS](http://www.qgis.org), etc...) based on data in a database or files.
* GIS software can also import data from WFS.

In this context a "feature" is a spatial entity (e.g. a point or line) with a set of attributes (the data). 

There are 3 basic request types.

#### GetCapabilities
"Tell me what you have to offer", i.e. what types of data do you have, what formats, filters, etc...?
```http
    http://geoserver-123.aodn.org.au/geoserver/imos/ows?
        service=WFS&
        version=1.0.0&
        request=GetCapabilities
```
The [response](http://geoserver-123.aodn.org.au/geoserver/imos/ows?service=WFS&version=1.0.0&request=GetCapabilities) is a long XML document, best suited for machine parsing, but human readable if necessary (if you know what you're looking for).

#### DescribeFeatureType
A "feature type" is a collection of features with set of attributes attached to each feature. Also called a "layer".
```http
    http://geoserver-123.aodn.org.au/geoserver/imos/ows?
        service=WFS&
        version=1.0.0&
        request=DescribeFeatureType&
        typeName=imos:anmn_ctd_profiles_data
```
The [response](http://geoserver-123.aodn.org.au/geoserver/imos/ows?service=WFS&version=1.0.0&request=DescribeFeatureType&typeName=imos:anmn_ctd_profiles_data) is again XML, giving the names and data types of each column.

#### GetFeature
```http
    http://geoserver-123.aodn.org.au/geoserver/imos/ows?
        service=WFS&
        version=1.0.0&
        request=GetFeature&
        typeName=imos:anmn_ctd_profiles_data&
        cql_filter=time_coverage_end AFTER 2016-01-01T00:00:00&
        outputFormat=csv
```
Returns [data](http://geoserver-123.aodn.org.au/geoserver/imos/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=imos:anmn_ctd_profiles_data&cql_filter=time_coverage_end%20AFTER%202016-01-01T00:00:00&outputFormat=csv) in requested format. 


## Other web services

### Web Map Service (WMS)

* Serves image tiles for interactive map applications like Google Maps.
* Based on the same sort of data "store" as WFS.
* Uses the spatial information and pre-defined styles to create the map.
* Can also be filtered.
* Feature attributes can also be returned by requesting information at a point.

### Web Coverage Service (WCS)

Similar to WFS in that it gives access to data, but for multi-dimensional, space/time-varying phenomena that are not easily represented by a set of discrete features. E.g. satellite observations.

### Web Processing Service (WPS)

